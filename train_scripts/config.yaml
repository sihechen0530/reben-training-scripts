job:
  name: bigearthnet-ft
  # partition/queue 名：有的集群叫 partition，有的叫 qos，按需删改
  partition: gpu-interactive
  qos: normal          # 如无用，删掉即可
  account: zhou.lihan   # 若集群要求记账账号
  time: "01:00:00"     # HH:MM:SS
  nodes: 1
  gres: "gpu:v100-sxm2:1"     # GPU 资源规格（匹配你的 srun 命令）
  cpus_per_task: 8
  mem: "32G"
  mail_user: "you@university.edu"
  mail_type: "END,FAIL"        # 可选：BEGIN, END, FAIL, REQUEUE, ALL
  chdir: "/home/zhou.lihan/reben-training-scripts/scripts"   # 作业工作目录
  output_dir: "../logs"           # slurm 日志目录（相对 chdir）

env:
  # 训练脚本所需的环境变量（可选）
  OMP_NUM_THREADS: 8
  TOKENIZERS_PARALLELISM: "false"
  # HF_TOKEN: "your_huggingface_token_here"  # Required for DINOv3 models (gated models on HuggingFace)

data:
  # BigEarthNet v2.0 数据集路径配置
  benv2_data_dir: "/scratch/chen.sihe1"

  script: "train_BigEarthNetv2_0.py"
  python: "python"   # 或 "python3"
  # 传给 train_BigEarthNetv2_0.py 的参数（会转换为 --k v）
  args:
    architecture: "dinov3-base"
    bandconfig: "rgb"      # # all, s2, s1, rgb, all_full, s2_full, s1_full
    bs: 32                 # batch size (注意：参数名是 bs 不是 batch_size)
    epochs: 20             # 短测试：20 epochs
    lr: 0.0001
    seed: 42
    workers: 8
    drop_rate: 0.15
    drop_path_rate: 0.15
    warmup: 1000
    use_wandb: false
    upload_to_hub: false
    linear_probe: true   # DINOv3 linear probing with 3-layer MLP head
    # hf_entity: "your-hf-entity"  # Required if upload_to_hub is true
    # resume_from: "best"  # or path to checkpoint
    config: "../train_scripts/config.yaml"  # Path to this config for data directory
  
  # 作业数组（超参搜索）——任选一种：
  sweep:
    # 方式1：笛卡尔积网格（submit.py 自动展开）
    grid:
      lr: [0.001, 0.0003]
      bs: [32, 64]        # 注意这里也要用 bs
      seed: [42, 123]
    # 方式2：从文件读取 N 行配置（与数组索引对应）
    # list_file: "sweeps.txt"
